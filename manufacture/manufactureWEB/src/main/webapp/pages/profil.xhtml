<ui:composition template="/layouts/master_layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:define name="stylesheets">
	<h:outputStylesheet name="profilCss.css" library="css"/>
</ui:define>

	<ui:define name="main-body">
		<div class="center-body">
<h:form>
		<p:panel>
			<f:facet name="header">
        		<h:outputLabel value="#{profilBean.userBean.user.login}" /><br/>
        		<h:outputLabel value="#{profilBean.userBean.user.userRole.role}" />
    		</f:facet>  
			<p:tabView orientation="left">
			
				<!-- Informations personnelles -->
				<p:tab>
				
					<f:facet name="title">
               			<h:outputLabel value="Informations personnelles"/>
               			<p:graphicImage value="/resources/images/logo.png" width="150px"/>
            		</f:facet>
            		
            		<p:outputPanel>
            		<h:commandLink action="#{editBean.editModePersonnel()}" value="Editer - Un command link le temps de faire l'image" rendered="#{not editBean.editModePersonnel}" />
            		</p:outputPanel>
            		
            		<p:outputPanel>
            		<h:commandLink action="#{editBean.saveUser()}" value="Sauvegarder - Un command link le temps de faire l'image" rendered="#{editBean.editModePersonnel}"/>
            		<h:commandLink action="#{editBean.cancelModePersonnel()}" value="Annuler - Un command link le temps de faire l'image" rendered="#{editBean.editModePersonnel}"/>
            		</p:outputPanel>
            		
					<div class="identity">
						<h2>Identité</h2>
						<h:outputLabel value="Nom"/> :
       					<h:outputLabel value="#{userBean.user.userName}" rendered="#{not editBean.editModePersonnel}" />
						<h:inputText value="#{userBean.user.userName}" rendered="#{editBean.editModePersonnel}" />
						
						<h:outputLabel value="Prénom"/> :
						<h:outputLabel value="#{userBean.user.userFirstName}" rendered="#{not editBean.editModePersonnel}" />
						<h:inputText value="#{userBean.user.userFirstName}" rendered="#{editBean.editModePersonnel}" />
						
						<h:outputLabel value="Civilité"/> :
						<h:outputLabel value="#{userBean.user.civility.civility}" rendered="#{not editBean.editModePersonnel}" />
						<p:selectOneRadio id="signup_civility" rendered="#{editBean.editModePersonnel}"
									value="#{userBean.user.civility.idCivility}">
									<f:selectItem itemLabel="Mr" itemValue="1" />
									<f:selectItem itemLabel="Mme" itemValue="2" />
									<f:selectItem itemLabel="Mlle" itemValue="3" />
						</p:selectOneRadio>
						
						<!-- Pour l'email et le login, la modification peut être autorisée à conditions qu'ils ne soient -->
						<!-- pas déjà utilisés par un autre utilisateur et qu'ils sont valides. -->
						<h:outputLabel value="Email"/> :
						<h:outputLabel value="#{userBean.user.email}"/>
<!-- 						<h:outputLabel value="#{userBean.user.email}" rendered="#{not editBean.editModePersonnel}" /> -->
<!-- 						<h:inputText value="#{userBean.user.email}" rendered="#{editBean.editModePersonnel}" /> -->
						
						<h:outputLabel value="Login"/> :
						<h:outputLabel value="#{userBean.user.login}"/>
<!-- 						<h:outputLabel value="#{userBean.user.login}" rendered="#{not editBean.editModePersonnel}" /> -->
<!-- 						<h:inputText value="#{userBean.user.login}" rendered="#{editBean.editModePersonnel}" /> -->
						
						<h:outputLabel value="Date d'inscription"/> :
						<h:outputLabel value="#{profilBean.sdf.format(userBean.user.createTime)}"/>
						
						<h:outputLabel value="Mot de passe"/> :
						<h:outputLabel value="***********" rendered="#{not editBean.editModePersonnel}" />
						<h:inputSecret value="#{userBean.user.password}" rendered="#{editBean.editModePersonnel}" />
						
					</div>
					
					<div class="identity" >
						<p:outputPanel id="companyName" rendered="#{not(userBean.user.userRole.role eq 'Particulier')}">
						<h2>Companie</h2>						
							<h:outputLabel value="Nom de la compagnie"/> :
							<h:outputLabel value="#{userBean.user.companyName}" rendered="#{not editBean.editModePersonnel}" />
							<h:inputText value="#{userBean.user.companyName}" rendered="#{editBean.editModePersonnel}" />
									
							<h:outputLabel value="Nom de la compagnie" /> :
							<h:outputLabel value="#{userBean.user.activityDomain}" rendered="#{not editBean.editModePersonnel}" />
							<h:inputText value="#{userBean.user.activityDomain}" rendered="#{editBean.editModePersonnel}" />
						</p:outputPanel>
					</div> 
					
				</p:tab>
				
				<!-- Adresse(s) -->
				<p:tab rendered="#{profilBean.userBean.user.userRole.role eq 'Particulier' or profilBean.userBean.user.userRole.role eq 'Professionnel'}" id="addresses">
					<f:facet name="title">
               			<h:outputLabel value="Adresses enregistrées"/>
               			<p:graphicImage value="/resources/images/logo.png" width="150px"/>
            		</f:facet>
            		
            		<h:dataTable var="address" value="#{profilBean.adressesFacturation}" >
            				<h:column>
            					<f:facet name="header">
               				 		<h2>Adresse(s) de facturation</h2>
               					</f:facet>
               					
            					<div class="address">
            						<h:outputLabel value="Rue"/>
       								<h:outputLabel value="#{address.street}" rendered="#{not(editBean.editModeAdresse)}" />
									<h:inputText value="#{address.street}" rendered="#{editBean.editModeAdresse}" />
									
									<h:outputLabel value=""/>
       								<h:outputLabel value="#{address.number}" rendered="#{not(editBean.editModeAdresse)}" />
									<h:inputText value="#{address.number}" rendered="#{editBean.editModeAdresse}" />
									
									<h:outputLabel value="Ville"/>
									<h:outputLabel value="#{address.city.postalCode}" rendered="#{not(editBean.editModeAdresse)}" />
       								<h:outputLabel value="#{address.city.cityName}" rendered="#{not(editBean.editModeAdresse)}" />
       								<p:selectOneMenu rendered="#{editBean.editModeAdresse}" 
       												 value="#{address.city.idCity}">
       									<f:selectItems var="item"
       												   value="#{mbDataLoader.listCity}"
       												   itemLabel="#{item.cityName}"
       												   itemValue="#{item.idCity}"/>
       								</p:selectOneMenu>
       								
       								<h:outputLabel value="Pays"/>
									<h:outputLabel value="#{address.city.country.countryName}" rendered="#{not(editBean.editModeAdresse)}" />
									<p:selectOneMenu rendered="#{editBean.editModeAdresse}" 
       												 value="#{address.city.country.idCountry}">
       									<f:selectItems var="item"
       												   value="#{mbDataLoader.listCountry}"
       												   itemLabel="#{item.countryName}"
       												   itemValue="#{item.idCountry}"/>
       								</p:selectOneMenu>
       								
									<h:outputLabel value="Planète"/>
									<h:outputLabel value="#{address.city.country.planet.planetName}" rendered="#{not(editBean.editModeAdresse)}" />
									<p:selectOneMenu rendered="#{editBean.editModeAdresse}" 
       												 value="#{address.city.country.planet.idPlanet}">
       									<f:selectItems var="item"
       												   value="#{mbDataLoader.listPlanet}"
       												   itemLabel="#{item.planetName}"
       												   itemValue="#{item.idPlanet}"/>
       								</p:selectOneMenu>
									
            					</div>
            				</h:column>
            		</h:dataTable>
            		
            		<h:dataTable var="address" value="#{profilBean.adressesLivraison}">
            				<h:column> 
            					<f:facet name="header">
               				 		<h2>Adresse(s) de livraison</h2>
               					</f:facet>
               					
            					<div class="address">
            						<h:outputLabel value="Rue" rendered="#{address.isBillingaddress}"/>
       								<h:outputLabel value="#{address.street}" rendered="#{not(editBean.editModeAdresse)}" />
									<h:inputText value="#{address.street}" rendered="#{editBean.editModeAdresse}" />
            					</div>
            				</h:column>
            			
            		</h:dataTable>
            		
				</p:tab>
				
				<!-- Vente(s) -->
				<p:tab rendered="#{profilBean.userBean.user.userRole.role eq 'Particulier' or profilBean.userBean.user.userRole.role eq 'Artisan'}">
					<f:facet name="title">
               			<h:outputLabel value="Mes ventes"/>
               			<p:graphicImage value="/resources/images/logo.png" width="150px"/>
            		</f:facet>
				</p:tab>
				
				<!-- Achat(s) -->
				<p:tab rendered="#{profilBean.userBean.user.userRole.role eq 'Particulier' or profilBean.userBean.user.userRole.role eq 'Professionnel'}">
					<f:facet name="title">
               			<h:outputLabel value="Mes commandes passées"/>
               			<p:graphicImage value="/resources/images/logo.png" width="150px"/>
            		</f:facet>
				</p:tab>
			</p:tabView>
			
			</p:panel>
			</h:form>
		</div>
	</ui:define>
</ui:composition>