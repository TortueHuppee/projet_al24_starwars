<ui:composition template="/layouts/master_layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="stylesheets">
		<h:outputStylesheet library="css" name="detailProduitCss.css" />
	</ui:define>

	<ui:define name="main-body">

<h:form id="myForm">
		<div class="product-description">
			
			<h2>
				<h:outputLabel value="#{mbProduct.productRef.productName}" />
				
				<p:growl id="messages" />
				
				<p:commandButton value="Ajouter au panier"
					action="#{mbCart.addProductToCart(mbProduct.produitAffiche.idProduct)}"
					update="messages"/>
			</h2>
			<img src="#{mbProduct.productRef.urlImage}" />
			<fieldset>
				<legend>Description</legend>
					
					
					
					<h:outputLabel value="Catégorie :" />
					<h:outputLabel value="#{mbProduct.productRef.category.categoryName}" />
					
					<h:outputLabel value="Prix :" />
					<h:outputLabel  value="#{mbProduct.DoubleFormat(mbProduct.produitAffiche.price)} Crédits" />

					<h:outputLabel value="Quantité :" />
					<p:spinner id="minMax" min="1" max="#{mbProduct.quantiteDispo}" value="#{mbCart.quantity}" />

					<h:outputLabel value="Description :" />
					<h:outputLabel value="#{mbProduct.productRef.description}" />
					
					<h:outputLabel value="Modèles de vaisseaux compatibles :" />
					<ul>
						<ui:repeat var="vaisseau" value="#{mbProduct.listeVaisseaux}">
							<li>#{vaisseau.spaceshipName}</li>
						</ui:repeat>
					</ul>
				</fieldset>
			
			<fieldset>
					<legend>Options disponibles</legend>

					<!-- Filtre Couleur -->
					<h:outputLabel value="Couleur :" />
					<h:selectOneMenu value="#{mbProduct.idColorSelected}">
						<f:selectItems var="item" value="#{mbProduct.listeCouleurs}"
							itemLabel="#{item.colorName}" itemValue="#{item.idColor}" />
						<f:ajax event="change"
							listener="#{mbProduct.filtrerListeProduitsParCouleur()}"
							render=":myForm" />
					</h:selectOneMenu>

					<!-- Filtre Matériaux -->
					<h:outputLabel value="Matériaux :" />
					<h:selectOneMenu value="#{mbProduct.idMaterialSelected}">
						<f:selectItems var="item" value="#{mbProduct.listeMateriaux}"
							itemLabel="#{item.materialName}" itemValue="#{item.idMaterial}" />
						<f:ajax event="change"
							listener="#{mbProduct.filtrerListeProduitsParMateriaux()}"
							render=":myForm" />
					</h:selectOneMenu>

					<!-- Filtre Constructeur -->
					<h:outputLabel value="Constructeur :" />
					<h:selectOneMenu value="#{mbProduct.idConstructorSelected}">
						<f:selectItems var="item" value="#{mbProduct.listeConstructeurs}"
							itemLabel="#{item.constructorName}"
							itemValue="#{item.idConstructor}" />
						<f:ajax event="change"
							listener="#{mbProduct.filtrerListeProduitsParConstructeur()}"
							render=":myForm" />
					</h:selectOneMenu>

				</fieldset>

		</div>

</h:form>
	</ui:define>

</ui:composition>