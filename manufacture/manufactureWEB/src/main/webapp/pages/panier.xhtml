<ui:composition template="/layouts/master_layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">


	<ui:define name="stylesheets">
		<h:outputStylesheet name="panierCss.css" library="css" />
	</ui:define>

	<ui:define name="main-body">
		<h:form id="myForm">
			<div class="product-description">
			<h2>
				<h:outputLabel value="Mon panier" />
				<p:commandButton value="Vider le Panier" action="#{mbCart.cleanCart()}" update=":myForm" />
			</h2>

				<table>
					<tr>
						<th>Produit</th>
						<th>Options</th>
						<th>Quantité</th>
						<th>Sous-total (Crédits)</th>
						<th></th>
					</tr>

					<ui:repeat var="produit" value="#{mbCart.panier}">
						<tr>
							<td>
								<img src="#{produit.product.productRef.urlImage}" />
								<h:outputLabel value="#{produit.product.productRef.productName}" />
								<br/>
								<h:outputLabel value="#{mbProduct.DoubleFormat(produit.product.price)} Crédits" />
							</td>
							<td>
								<h:outputLabel value="Catégorie :" />
								<h:outputLabel value="#{produit.product.productRef.category.categoryName}" />
								<h:outputLabel value="Couleur :" />
								<h:outputLabel value="#{produit.product.color.colorName}" />
								<h:outputLabel value="Matériaux :" />
								<h:outputLabel value="#{produit.product.material.materialName}" />
							</td>
							<td>
								<h:commandButton value="-"
									action="#{mbCart.decrementProductQuantity(produit.product.idProduct)}" />
								<h:outputLabel value="#{produit.quantity}" />
								<h:commandButton value="+"
									action="#{mbCart.incrementProductQuantity(produit.product.idProduct)}" />
							</td>
							<td>
								<h:outputLabel value="#{mbProduct.DoubleFormat(mbCart.getSubTotalPrice(produit.product.idProduct))}" />
							</td>
							<td>
								<h:commandButton image="../resources/images/delete.png"
									action="#{mbCart.deleteProductFromCart(produit.product.idProduct)}"
									update=":myForm" />
							</td>						
						</tr>
					</ui:repeat>
					
				</table>

				<div class="recapCommande">
					<h:outputLabel value="Prix total (crédits) :" />
					<h:outputLabel value="#{mbProduct.DoubleFormat(mbCart.getTotalPrice())}" />
					<br/>
					<p:commandButton value="Passer Commande" action="#{paymentBean.processPayment()}" />
				</div>  


			</div>
		</h:form>
	</ui:define>


</ui:composition>