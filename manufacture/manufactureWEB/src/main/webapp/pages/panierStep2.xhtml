<ui:composition template="/layouts/master_layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">


	<ui:define name="stylesheets">
		<h:outputStylesheet name="panierCss.css" library="css" />
	</ui:define>

	<ui:define name="main-body">
		<h:form id="myForm">
			<div class="product-description">

				<p:steps activeIndex="1" styleClass="custom" readonly="false">
					<p:menuitem value="Mon panier" action="/pages/panierStep1" />
					<p:menuitem value="Options" />
					<p:menuitem value="Paiement" />
					<p:menuitem value="Récapitulatif" />
				</p:steps>

				<h:outputLabel value="Choisir le mode de transport" />
				<p:selectOneMenu value="#{mbCart.cart.delivery.idDelivery}">
					<f:selectItems var="item" value="#{mbSteps.moyensDeLivraisons}"
						itemLabel="#{item.deliveryMethod (item.deliveryPrice Crédits)}"
						itemValue="#{item.idDelivery}" />
				</p:selectOneMenu>

				Si moyen de livraion = points relais = afficher les points relais
				Sinon affichés les adresses de l'utilisateur Si aucune adresse
				d'enregistrée sur cet utilisateur, lui proposer d'en rajouter ici
				directement (un petit énorme bouton)

				<p:commandButton value="Ajouter une adresse" type="button"
					onclick="PF('addAddress').show();"
					actionListener="#{editBean.cancelModeAdresse()}" />
				<br />

				<p:dialog header="Ajouter une adresse" widgetVar="addAddress"
					modal="true" height="100">
					<h2>Nouvelle adresse</h2>

					<h:outputLabel value="Rue" class="dialogLabel" /> :
										<h:inputText value="#{editBean.nouvelleAdresse.street}"
						class="dialogInput" />

					<h:outputLabel value="                " class="dialogLabel" />
					<h:inputText value="#{editBean.nouvelleAdresse.number}"
						class="dialogInput" />

					<h:outputLabel value="Code postal" class="dialogLabel" /> :
										<input type="number"
						value="#{editBean.nouvelleAdresse.city.postalCode}"
						class="dialogInput" />

					<h:outputLabel value="Ville" class="dialogLabel" /> :
    									<p:selectOneMenu value="#{editBean.ville.idCity}"
						style="width:400px">
						<f:selectItems var="item" value="#{mbDataLoader.listCity}"
							itemLabel="#{item.cityName}" itemValue="#{item.idCity}" />
					</p:selectOneMenu>

					<h:outputLabel value="Pays" class="dialogLabel" /> :
									<p:selectOneMenu style="width:400px">
						<f:selectItems var="item" value="#{mbDataLoader.listCountry}"
							itemLabel="#{item.countryName}" itemValue="#{item.idCountry}" />
						<f:ajax update="@form" process="@this" />
					</p:selectOneMenu>

					<h:outputLabel value="Planète" class="dialogLabel" /> :
									<p:selectOneMenu style="width:400px">
						<f:selectItems var="item" value="#{mbDataLoader.listPlanet}"
							itemLabel="#{item.planetName}" itemValue="#{item.idPlanet}" />
						<f:ajax update="@form" process="@this" />
					</p:selectOneMenu>

					<h:outputLabel value="Adresse de facturation"
						class="dialogCheckBox" /> :
       								<p:selectBooleanCheckbox
						value="#{editBean.nouvelleAdresse.isBillingaddress}" />

					<h:outputLabel value="Adresse de livraison" class="dialogCheckBox" /> :
       								<p:selectBooleanCheckbox
						value="#{editBean.nouvelleAdresse.isDeliveryaddress}" />

					<p:commandButton value="Annuler" type="button"
						onclick="PF('addAddress').hide();"
						actionListener="#{editBean.cancelModeAdresse()}" />

					<p:commandButton value="Enregistrer" type="button"
						onclick="PF('addAddress').hide();"
						actionListener="#{editBean.saveAdresse(address)}" />
				</p:dialog>

				<p:commandButton value="Continuer" action="/pages/panierStep3" />

			</div>
		</h:form>
	</ui:define>


</ui:composition>